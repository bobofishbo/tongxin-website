<div class="flex items-center space-x-4">
  <span class="text-sm font-medium">En</span>
  <label class="relative inline-flex items-center cursor-pointer">
    <input
      type="checkbox"
      id="languageToggle"
      class="sr-only peer"
      onchange="setLanguage(this.checked ? 'zh' : 'en')"
    />
    <div
      class="w-12 h-6 bg-gray-200 rounded-full peer-focus:ring-2 peer-focus:ring-primary peer peer-checked:after:translate-x-6 peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"
    ></div>
  </label>
  <span class="text-sm font-medium">ä¸­</span>
</div>

<script client:load>
  // Attach setLanguage to window for global access
  window.setLanguage = function (lang) {
    const url = new URL(window.location);
    url.searchParams.set("lang", lang);
    window.location.href = url.toString();
  };

  // Ensure the toggle reflects the current language
  window.onload = function () {
    const currentLang = new URL(window.location).searchParams.get("lang") || "en";
    const toggle = document.getElementById("languageToggle");
    toggle.checked = currentLang === "zh";
  };
</script>
